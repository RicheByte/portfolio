<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="RicheByte OS - Kali/Mac Hybrid">
    <title>RicheByte OS</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #0a0a0a;
            --topbar-bg: rgba(10, 10, 10, 0.8);
            --dock-bg: rgba(20, 20, 20, 0.6);
            --window-bg: rgba(20, 20, 20, 0.95);
            --accent-color: #20c20e; /* Kali Green */
            --accent-blue: #00d4ff;
            --text-color: #e0e0e0;
            --border-color: #333;
        }

        * { box-sizing: border-box; user-select: none; }
        
        body {
            margin: 0;
            padding: 0;
            width: 100vw;
            height: 100vh;
            /* Kali-esque Abstract Wallpaper */
            background: url('https://images.unsplash.com/photo-1526374965328-7f61d4dc18c5?q=80&w=2070&auto=format&fit=crop') no-repeat center center/cover;
            font-family: 'Inter', sans-serif;
            overflow: hidden;
            color: var(--text-color);
        }

        /* Matrix Overlay (Hidden by default) */
        #matrix-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: 0;
            opacity: 0;
            transition: opacity 1s;
            background: black;
        }
        #matrix-overlay.active { opacity: 0.8; }
        canvas { display: block; }

        /* Top Bar */
        #top-bar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 30px;
            background: var(--topbar-bg);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 15px;
            z-index: 10000;
            font-size: 0.85rem;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }

        .top-left { display: flex; gap: 15px; align-items: center; }
        .top-right { display: flex; gap: 15px; align-items: center; }

        #logo-btn {
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        #logo-btn:hover { color: var(--accent-blue); }

        /* Dock */
        #dock-container {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10000;
            display: flex;
            justify-content: center;
        }

        #dock {
            background: var(--dock-bg);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 16px;
            padding: 10px;
            display: flex;
            gap: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            transition: width 0.2s;
        }

        .dock-item {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            position: relative;
            background: rgba(255,255,255,0.05);
            color: #fff;
        }

        .dock-item:hover {
            transform: scale(1.2) translateY(-10px);
            background: rgba(255,255,255,0.15);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .dock-item.active::after {
            content: '';
            position: absolute;
            bottom: -5px;
            width: 5px;
            height: 5px;
            background: var(--accent-color); /* Green dot for running apps */
            border-radius: 50%;
        }

        /* Tooltip for Dock */
        .dock-item::before {
            content: attr(data-title);
            position: absolute;
            top: -35px;
            background: rgba(0,0,0,0.8);
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s;
            white-space: nowrap;
        }
        .dock-item:hover::before { opacity: 1; }

        /* Windows */
        .window {
            position: absolute;
            background: var(--window-bg);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.6);
            display: flex;
            flex-direction: column;
            backdrop-filter: blur(20px);
            min-width: 300px;
            min-height: 200px;
            transition: transform 0.15s, opacity 0.15s;
            opacity: 0;
            transform: scale(0.9);
            pointer-events: none;
        }

        .window.open {
            opacity: 1;
            transform: scale(1);
            pointer-events: auto;
        }

        .window.minimized {
            opacity: 0;
            transform: scale(0.5) translateY(200px);
            pointer-events: none;
        }

        .title-bar {
            height: 38px;
            background: linear-gradient(to bottom, rgba(255,255,255,0.05), rgba(255,255,255,0));
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            padding: 0 15px;
            cursor: default;
            border-radius: 10px 10px 0 0;
            position: relative;
        }

        .window-controls {
            display: flex;
            gap: 8px;
            position: absolute;
            left: 15px;
        }
        .control-btn {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            cursor: pointer;
            border: none;
            transition: filter 0.2s;
        }
        .control-btn:hover { filter: brightness(0.8); }
        .close-btn { background: #ff5f56; }
        .min-btn { background: #ffbd2e; }
        .max-btn { background: #27c93f; }

        .window-title {
            flex: 1;
            text-align: center;
            font-size: 0.9rem;
            font-weight: 600;
            color: #ccc;
        }

        .window-content {
            flex: 1;
            overflow: auto;
            padding: 20px;
            color: #ccc;
            font-size: 0.95rem;
            line-height: 1.6;
            user-select: text;
        }

        /* Content Styles */
        .project-item {
            background: rgba(0,0,0,0.4);
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 10px;
            border-left: 3px solid var(--accent-color);
        }
        .tech-tag {
            display: inline-block;
            background: rgba(32, 194, 14, 0.15);
            color: var(--accent-color);
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            margin-right: 5px;
            border: 1px solid rgba(32, 194, 14, 0.3);
        }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #444; border-radius: 3px; }

        /* Secrets */
        .hidden-flag {
            display: none; /* Or is it? */
            color: #333;
            font-size: 0.1px;
        }
        
        #root-shell {
            position: fixed;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 400px;
            background: black;
            border: 2px solid var(--accent-color);
            padding: 20px;
            font-family: 'JetBrains Mono', monospace;
            color: var(--accent-color);
            z-index: 20000;
            display: none;
            box-shadow: 0 0 50px var(--accent-color);
        }

    </style>
</head>
<body>

    <!-- Matrix Overlay -->
    <div id="matrix-overlay"><canvas id="matrix-canvas"></canvas></div>

    <!-- Top Bar -->
    <div id="top-bar">
        <div class="top-left">
            <div id="logo-btn" onclick="triggerEasterEgg()">
                <i class="fab fa-linux"></i> <span>RicheByte OS</span>
            </div>
            <span id="active-app-name" style="font-weight: 600;">Desktop</span>
        </div>
        <div class="top-right">
            <i class="fas fa-wifi" title="Connected: Secure"></i>
            <i class="fas fa-volume-up"></i>
            <i class="fas fa-battery-full"></i>
            <span id="clock">12:00</span>
        </div>
    </div>

    <!-- Dock -->
    <div id="dock-container">
        <div id="dock">
            <div class="dock-item" onclick="openWindow('about')" data-title="About Me">
                <i class="fas fa-user-astronaut" style="color: #4fc3f7;"></i>
            </div>
            <div class="dock-item" onclick="openWindow('projects')" data-title="Projects">
                <i class="fas fa-folder-open" style="color: #ffd54f;"></i>
            </div>
            <div class="dock-item" onclick="openWindow('skills')" data-title="Skills">
                <i class="fas fa-brain" style="color: #ff8a65;"></i>
            </div>
            <div class="dock-item" onclick="openWindow('software')" data-title="Software Center">
                <i class="fas fa-box-open" style="color: #a5d6a7;"></i>
            </div>
            <div class="dock-item" onclick="openWindow('terminal')" data-title="Terminal">
                <i class="fas fa-terminal" style="color: #e0e0e0;"></i>
            </div>
            <div class="dock-item" onclick="location.href='mailto:contact@richebyte.dev'" data-title="Contact">
                <i class="fas fa-envelope" style="color: #e57373;"></i>
            </div>
        </div>
    </div>

    <!-- Windows -->

    <!-- About Window -->
    <div id="win-about" class="window" style="top: 15%; left: 15%; width: 500px; height: 400px;">
        <div class="title-bar">
            <div class="window-controls">
                <button class="control-btn close-btn" onclick="closeWindow('about')"></button>
                <button class="control-btn min-btn" onclick="minimizeWindow('about')"></button>
                <button class="control-btn max-btn"></button>
            </div>
            <span class="window-title">About Me</span>
        </div>
        <div class="window-content">
            <div style="text-align: center; margin-bottom: 20px;">
                <img src="me.png" alt="Profile" style="width: 100px; height: 100px; border-radius: 50%; border: 2px solid var(--accent-color);">
                <h3>Kanchuka (RicheByte)</h3>
                <p style="color: var(--accent-blue);">Cybersecurity Enthusiast & Developer</p>
            </div>
            <p>Hello! I'm Kanchuka. I focus on cybersecurity and creative development because I'm genuinely curious about how digital systems work and how to make them secure.</p>
            <p>My work involves studying network protocols, concentrating on writing secure code, and understanding both offensive and defensive security techniques.</p>
            <!-- Hidden Flag 1 -->
            <span class="hidden-flag">flag{h0v3r_m4st3r_f0und_m3}</span>
        </div>
    </div>

    <!-- Projects Window -->
    <div id="win-projects" class="window" style="top: 20%; left: 20%; width: 600px; height: 500px;">
        <div class="title-bar">
            <div class="window-controls">
                <button class="control-btn close-btn" onclick="closeWindow('projects')"></button>
                <button class="control-btn min-btn" onclick="minimizeWindow('projects')"></button>
                <button class="control-btn max-btn"></button>
            </div>
            <span class="window-title">Projects Explorer</span>
        </div>
        <div class="window-content">
            <div class="project-item">
                <div style="display:flex; justify-content:space-between;">
                    <span style="font-weight:bold; color:white;">Stealth Network Scanner</span>
                    <i class="fas fa-lock" style="color: var(--accent-color);"></i>
                </div>
                <p>Python-based network scanner using Scapy with stealth techniques.</p>
                <div><span class="tech-tag">Python</span><span class="tech-tag">Scapy</span></div>
            </div>
            <div class="project-item">
                <div style="display:flex; justify-content:space-between;">
                    <span style="font-weight:bold; color:white;">Secure File Encryptor</span>
                    <i class="fas fa-key" style="color: var(--accent-color);"></i>
                </div>
                <p>AES-GCM file encryption tool with secure key derivation.</p>
                <div><span class="tech-tag">Python</span><span class="tech-tag">Cryptography</span></div>
            </div>
            <div class="project-item">
                <div style="display:flex; justify-content:space-between;">
                    <span style="font-weight:bold; color:white;">Web Vulnerability Dashboard</span>
                    <i class="fas fa-chart-line" style="color: var(--accent-color);"></i>
                </div>
                <p>Concept dashboard for aggregating security scan results.</p>
                <div><span class="tech-tag">Flask</span><span class="tech-tag">React</span></div>
            </div>
        </div>
    </div>

    <!-- Skills Window -->
    <div id="win-skills" class="window" style="top: 25%; left: 25%; width: 450px; height: 450px;">
        <div class="title-bar">
            <div class="window-controls">
                <button class="control-btn close-btn" onclick="closeWindow('skills')"></button>
                <button class="control-btn min-btn" onclick="minimizeWindow('skills')"></button>
                <button class="control-btn max-btn"></button>
            </div>
            <span class="window-title">System Capabilities</span>
        </div>
        <div class="window-content">
            <h4 style="color: var(--accent-blue); border-bottom: 1px solid #333; padding-bottom: 5px;">> Programming</h4>
            <ul>
                <li>Python (Advanced)</li>
                <li>JavaScript / Node.js</li>
                <li>Bash Scripting</li>
                <li>C++</li>
            </ul>
            <h4 style="color: var(--accent-blue); border-bottom: 1px solid #333; padding-bottom: 5px;">> Security</h4>
            <ul>
                <li>Penetration Testing</li>
                <li>Network Analysis (Wireshark)</li>
                <li>Vulnerability Assessment</li>
                <li>SIEM (ELK, Splunk)</li>
            </ul>
        </div>
    </div>

    <!-- Software Center Window (Iframe) -->
    <div id="win-software" class="window" style="top: 15%; left: 35%; width: 800px; height: 600px;">
        <div class="title-bar">
            <div class="window-controls">
                <button class="control-btn close-btn" onclick="closeWindow('software')"></button>
                <button class="control-btn min-btn" onclick="minimizeWindow('software')"></button>
                <button class="control-btn max-btn"></button>
            </div>
            <span class="window-title">Software Center</span>
        </div>
        <div class="window-content" style="padding: 0; overflow: hidden;">
            <iframe src="software.html" style="width: 100%; height: 100%; border: none;"></iframe>
        </div>
    </div>

    <!-- Terminal Window (Iframe) -->
    <div id="win-terminal" class="window" style="top: 20%; left: 30%; width: 700px; height: 450px;">
        <div class="title-bar">
            <div class="window-controls">
                <button class="control-btn close-btn" onclick="closeWindow('terminal')"></button>
                <button class="control-btn min-btn" onclick="minimizeWindow('terminal')"></button>
                <button class="control-btn max-btn"></button>
            </div>
            <span class="window-title">Terminal</span>
        </div>
        <div class="window-content" style="padding: 0; overflow: hidden; background: black;">
            <iframe src="terminal.html" style="width: 100%; height: 100%; border: none;"></iframe>
        </div>
    </div>

    <!-- Root Shell Secret -->
    <div id="root-shell">
        <h3 style="margin-top: 0; color: red;">ROOT ACCESS GRANTED</h3>
        <p>You have unlocked the developer console.</p>
        <p>Secret Flag: <span style="color: white; background: #333; padding: 2px 5px;">flag{k0n4m1_m4st3r}</span></p>
        <button onclick="document.getElementById('root-shell').style.display='none'" style="background: var(--accent-color); border: none; padding: 5px 10px; cursor: pointer; font-weight: bold;">CLOSE</button>
    </div>

    <script>
        // --- Window Management ---
        let zIndex = 100;
        const activeAppName = document.getElementById('active-app-name');

        function openWindow(id) {
            const win = document.getElementById('win-' + id);
            if (!win) return;

            // Visual feedback on dock
            document.querySelectorAll('.dock-item').forEach(el => el.classList.remove('active'));
            const dockItem = document.querySelector(`.dock-item[onclick="openWindow('${id}')"]`);
            if (dockItem) dockItem.classList.add('active');

            if (win.classList.contains('open')) {
                if (win.classList.contains('minimized')) {
                    win.classList.remove('minimized');
                }
                focusWindow(id);
                return;
            }

            win.classList.add('open');
            focusWindow(id);
        }

        function closeWindow(id) {
            const win = document.getElementById('win-' + id);
            win.classList.remove('open');
            win.classList.remove('minimized');
            
            const dockItem = document.querySelector(`.dock-item[onclick="openWindow('${id}')"]`);
            if (dockItem) dockItem.classList.remove('active');
            
            activeAppName.innerText = 'Desktop';
        }

        function minimizeWindow(id) {
            const win = document.getElementById('win-' + id);
            win.classList.add('minimized');
            activeAppName.innerText = 'Desktop';
        }

        function focusWindow(id) {
            const win = document.getElementById('win-' + id);
            zIndex++;
            win.style.zIndex = zIndex;
            
            // Update Top Bar
            const title = win.querySelector('.window-title').innerText;
            activeAppName.innerText = title;
        }

        // --- Dragging Logic ---
        let isDragging = false;
        let currentWin = null;
        let offset = { x: 0, y: 0 };

        document.querySelectorAll('.title-bar').forEach(bar => {
            bar.addEventListener('mousedown', (e) => {
                if (e.target.closest('.window-controls')) return;

                isDragging = true;
                currentWin = bar.closest('.window');
                
                const id = currentWin.id.replace('win-', '');
                focusWindow(id);

                offset.x = e.clientX - currentWin.offsetLeft;
                offset.y = e.clientY - currentWin.offsetTop;
            });
        });

        document.addEventListener('mousemove', (e) => {
            if (!isDragging || !currentWin) return;
            e.preventDefault();
            
            let x = e.clientX - offset.x;
            let y = e.clientY - offset.y;
            
            // Keep within bounds (rough)
            if (y < 30) y = 30; // Below top bar
            
            currentWin.style.left = x + 'px';
            currentWin.style.top = y + 'px';
        });

        document.addEventListener('mouseup', () => {
            isDragging = false;
            currentWin = null;
        });

        // --- Clock ---
        function updateClock() {
            const now = new Date();
            const timeString = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            document.getElementById('clock').innerText = timeString;
        }
        setInterval(updateClock, 1000);
        updateClock();

        // --- Easter Eggs ---
        
        // 1. Konami Code
        const konamiCode = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight', 'b', 'a'];
        let konamiIndex = 0;

        document.addEventListener('keydown', (e) => {
            if (e.key === konamiCode[konamiIndex]) {
                konamiIndex++;
                if (konamiIndex === konamiCode.length) {
                    document.getElementById('root-shell').style.display = 'block';
                    konamiIndex = 0;
                }
            } else {
                konamiIndex = 0;
            }
        });

        // 2. Matrix Rain Trigger
        let clickCount = 0;
        function triggerEasterEgg() {
            clickCount++;
            if (clickCount === 5) {
                const overlay = document.getElementById('matrix-overlay');
                overlay.classList.toggle('active');
                if (overlay.classList.contains('active')) {
                    startMatrix();
                }
                clickCount = 0;
            }
        }

        // Matrix Effect
        const canvas = document.getElementById('matrix-canvas');
        const ctx = canvas.getContext('2d');

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const katakana = 'アァカサタナハマヤャラワガザダバパイィキシチニヒミリヰギジヂビピウゥクスツヌフムユュルグズブヅプエェケセテネヘメレヱゲゼデベペオォコソトノホモヨョロヲゴゾドボポヴッン';
        const latin = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
        const nums = '0123456789';
        const alphabet = katakana + latin + nums;

        const fontSize = 16;
        const columns = canvas.width/fontSize;

        const rainDrops = [];
        for( let x = 0; x < columns; x++ ) {
            rainDrops[x] = 1;
        }

        function draw() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            ctx.fillStyle = '#0F0';
            ctx.font = fontSize + 'px monospace';

            for(let i = 0; i < rainDrops.length; i++) {
                const text = alphabet.charAt(Math.floor(Math.random() * alphabet.length));
                ctx.fillText(text, i*fontSize, rainDrops[i]*fontSize);

                if(rainDrops[i]*fontSize > canvas.height && Math.random() > 0.975){
                    rainDrops[i] = 0;
                }
                rainDrops[i]++;
            }
        }

        let matrixInterval;
        function startMatrix() {
            if (matrixInterval) clearInterval(matrixInterval);
            matrixInterval = setInterval(draw, 30);
        }

        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });

    </script>
</body>
</html>
